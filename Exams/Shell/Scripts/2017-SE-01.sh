#Напишете скрипт, който получава задължителен първи позиционен параметър – директория и незадължителен втори – число.
#Скриптът трябва да проверява подадената директория
#и нейните под-директории и да извежда имената на:
#7
#а) при подаден на скрипта втори параметър – всички файлове с брой hardlink-ове поне равен на
#параметъра;
#б) при липса на втори параметър – всички symlink-ове с несъществуващ destination (счупени
#symlink-ове).
#Забележка:За удобство приемаме, че ако има подаден втори параметър, то той е число.

#!/bin/bash


if [[ $# -lt 1 ]]; then
    echo "Usage: $0 <directory> [min_hardlinks]"
    exit 1
fi

dir="$1"
min_links="$2"


if [[ ! -d "$dir" ]]; then
    echo "Directory does not exist: $dir"
    exit 2
fi

if [[ -n "$min_links" ]]; then
    # а) Ако е подаден втори параметър: всички файлове с hardlink >= min_links
    find "$dir" -type f -links +=$((min_links - 1)) -print
else
    # б) Ако няма втори параметър: всички broken symlink-ове
    find "$dir" -type l ! -exec test -e {} \; -print
fi
