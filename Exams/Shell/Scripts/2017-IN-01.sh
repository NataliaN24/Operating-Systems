#Напишете скрипт, който приема три задължителни позицонни аргумента:
#• име на фаил
#• низ1
#• низ2
#Файлът е текстови, и съдържа редове във формат:
#6
#ключ=стойност
#където стойност може да бъде:
#• празен низ, т.е. редът е ключ=
#• низ, състоящ се от един или повече термове, разделени с интервали, т.е., редът е ключ=t1 t2
#t3
#Някъде във файла:
#• се съдържа един ред с ключ първия подаден низ (низ1 );
#• и може да се съдържа един ред с ключ втория подаден низ (низ2 ).
#Скриптът трябва да променя реда с ключ низ2 така, че обединението на термовете на редовете с
#ключове низ1 и низ2 да включва всеки терм еднократно.
#Примерен входен файл:
#$ cat z1.txt
#FOO=73
#BAR=42
#BAZ=
#ENABLED_OPTIONS=a b c d
#ENABLED_OPTIONS_EXTRA=c e f
#Примерно извикване:
#$ ./a.sh z1.txt ENABLED_OPTIONS ENABLED_OPTIONS_EXTRA
#Изходен файл:
#$ cat z1.txt
#FOO=73
#BAR=42
#BAZ=
#ENABLED_OPTIONS=a b c d
#ENABLED_OPTIONS_EXTRA=e f


#!/bin/bash

# Проверка за три аргумента
if [[ $# -ne 3 ]]; then
    echo "Usage: $0 <file> <key1> <key2>"
    exit 1
fi

file="$1"
key1="$2"
key2="$3"

# Проверка дали файлът съществува
if [[ ! -f "$file" ]]; then
    echo "File does not exist."
    exit 2
fi

# Извличаме стойностите на ключ1 и ключ2
value1=$(grep "^$key1=" "$file" | cut -d'=' -f2)
value2=$(grep "^$key2=" "$file" | cut -d'=' -f2)

# Обединение на термовете и премахване на дубликати
# tr ' ' '\n' → всеки терм на нов ред
# sort -u → уникални редове
# tr '\n' ' ' → връща обратно в една линия

new_value=$(echo -e "$value1\n$value2" | tr ' ' '\n' | sort -u | tr '\n' ' ' | sed 's/ $//')

# Презаписваме реда с ключ2 във файла
sed -i "s|^$key2=.*|$key2=$new_value|" "$file"
